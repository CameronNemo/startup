# rcS - runlevel compatibility
#
# This task runs the old sysv-rc startup scripts.

start on startup

# rc events are exclusive
stop on rc0-halt/start
stop on rc0-poweroff/start
stop on rc1/start
stop on rc2/start
stop on rc3/start
stop on rc4/start
stop on rc5/start
stop on rc6/start

# Note: there can be no previous runlevel here, if we have one it's bad
# information (we enter rc1 not rcS for maintenance).  Run /etc/init.d/rc
# without information so that it defaults to previous=N runlevel=S.
script
	runlevel --set S >/dev/null || true
	exec /etc/init.d/rcS
end script

# Temporary grant until logd is ready and cryptdisks has been fixed
console owner
